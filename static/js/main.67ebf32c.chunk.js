(this["webpackJsonpquill-demo"]=this["webpackJsonpquill-demo"]||[]).push([[0],{13:function(e,t,n){e.exports=n(25)},18:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(7),r=n.n(i),o=(n(18),n(3)),c=n(4),s=n(5),u=n(1),d=n(11),m=n(10),f=n(12),h=n(2),g=n.n(h),b=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"length",value:function(){return 1}}],[{key:"create",value:function(e){var t=e.title,a=e.slug,l=e.id,i=Object(d.a)(Object(u.a)(n),"create",this).call(this);return i.textContent=t,i.setAttribute("contenteditable","false"),i.dataset.title=t,i.dataset.slug=a,i.dataset.id=l,i}},{key:"value",value:function(e){return e.dataset}}]),n}(g.a.import("blots/embed"));b.blotName="placeholder-token",b.tagName="span",b.className="token";var p=function(e,t){var n=(e.getSelection()||{}).index||e.getLength()||0;e.insertEmbed(n,b.blotName,t),e.insertText(n+1," "),e.setSelection(n+2)},v=function(e){var t=e.title,n=e.slug,i=e.id,r=e.inputs,c=Object(a.useState)(!1),s=Object(o.a)(c,2),u=s[0],d=s[1],m={title:t,slug:n,id:i},f=function(e){return function(){var t=e&&e.current;t&&p(t,m)}};return l.a.createElement("li",{ref:function(e){e&&e.addEventListener("focusout",(function(t){e.contains(t.relatedTarget)||d(!1)}))}},l.a.createElement("button",{className:b.className,draggable:"true",onDragStart:function(e){var a="{{".concat(n,"|").concat(i,"}}"),l=JSON.stringify({title:t,slug:n,id:i});e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/vnd.placeholder.token",l)},onClick:function(){d(!u)},type:"button"},t),u&&l.a.createElement("ul",null,r.map((function(e){var t=e.label,n=e.quillRef;return l.a.createElement("li",{key:t},l.a.createElement("button",{onClick:f(n),type:"button"},t))}))))},E=n(8),k=n(9),O=n.n(k),S=function(){function e(t){Object(c.a)(this,e),this.quill=t,this.onDrop=this.onDrop.bind(this),this.onClick=this.onClick.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.quill.root.addEventListener("drop",this.onDrop,!1),this.quill.root.addEventListener("click",this.onClick,!1),this.quill.on("selection-change",this.onSelectionChange)}return Object(s.a)(e,[{key:"onDrop",value:function(e){var t=this.quill,n=e.dataTransfer.getData("application/vnd.placeholder.token");if(n&&t){if(e.preventDefault(),document.caretRangeFromPoint){var a=document.getSelection(),l=document.caretRangeFromPoint(e.clientX,e.clientY);a&&l&&a.setBaseAndExtent(l.startContainer,l.startOffset,l.startContainer,l.startOffset)}p(t,JSON.parse(n))}}},{key:"onClick",value:function(e){var t=O.a.find(e.target);t instanceof b&&this.quill.setSelection(t.offset(this.quill.scroll),1,"user")}},{key:"onSelectionChange",value:function(){var e=window.getSelection();this.quill.root.querySelectorAll("".concat(b.tagName,".").concat(b.className)).forEach((function(t){e.containsNode(t,!0)?t.classList.add("selected"):t.classList.remove("selected")}))}}]),e}(),j={formats:["bold","italic",b.blotName],modules:Object(E.a)({toolbar:[["bold","italic"]]},"token-drop",!0),theme:"snow"},q=function(e){var t=e.value,n=e.onChange,i=e.quillRef,r=Object(a.useState)(null),c=Object(o.a)(r,2),s=c[0],u=c[1];return l.a.createElement("div",{ref:function(e){if(!s&&e){e.innerHTML=t;var a=new g.a(e,j);a.on("text-change",(function(){return function(e){var t=(new DOMParser).parseFromString(e,"text/html");t.querySelectorAll(".token").forEach((function(e){var t=e.dataset,n=t.id,a=t.slug;e.replaceWith("{{".concat(a,"|").concat(n,"}}"))})),n(t.body.innerHTML)}(a.root.innerHTML)})),u(a),i.current=a}},style:{height:200}})};n(24);g.a.register(b),g.a.register("modules/".concat("token-drop"),S);var y=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=[{label:"Section One",quillRef:e},{label:"Section Two",quillRef:t}],i=Object(a.useState)("<p>The <strong>quick brown fox</strong> jumps over the <em>lazy dog</em>.</p>"),r=Object(o.a)(i,2),c=r[0],s=r[1],u=Object(a.useState)("<p>Sphinx of <strong>black quartz</strong>, judge my <em>vow</em>.</p>"),d=Object(o.a)(u,2),m=d[0],f=d[1];return l.a.createElement("div",{id:"app"},l.a.createElement("aside",null,l.a.createElement("h1",null,"Tokens"),l.a.createElement("ul",{className:"token-list"},l.a.createElement(v,{title:"first name",slug:"first_name",id:"123",inputs:n}),l.a.createElement(v,{title:"last name",slug:"last_name",id:"456",inputs:n}),l.a.createElement(v,{title:"email address",slug:"email",id:"789",inputs:n}))),l.a.createElement("section",null,l.a.createElement("h1",null,"Editors"),l.a.createElement("p",null,"Note: only ",l.a.createElement("strong",null,"bold"),", ",l.a.createElement("strong",null,"italic"),", and"," ",l.a.createElement("strong",null,"tokens")," are enabled."),l.a.createElement(q,{value:c,onChange:s,quillRef:e}),l.a.createElement(q,{value:m,onChange:f,quillRef:t}),l.a.createElement("h1",null,"Outputs"),l.a.createElement("div",{id:"result"},l.a.createElement("p",null,c),l.a.createElement("p",null,m))))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.67ebf32c.chunk.js.map