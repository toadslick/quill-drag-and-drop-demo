(this["webpackJsonpquill-demo"]=this["webpackJsonpquill-demo"]||[]).push([[0],{13:function(e,t,n){e.exports=n(25)},18:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(7),r=n.n(i),o=(n(18),n(3)),c=n(4),s=n(5),u=n(1),d=n(11),f=n(10),m=n(12),h=n(2),g=n.n(h),b=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"length",value:function(){return 1}}],[{key:"create",value:function(e){var t=e.title,a=e.slug,l=e.id,i=Object(d.a)(Object(u.a)(n),"create",this).call(this);return i.textContent=t,i.setAttribute("contenteditable","false"),i.dataset.title=t,i.dataset.slug=a,i.dataset.id=l,i}},{key:"value",value:function(e){return e.dataset}}]),n}(g.a.import("blots/embed"));b.blotName="placeholder-token",b.tagName="span",b.className="token";var p=function(e,t){var n=(e.getSelection()||{}).index;n="number"===typeof n?n:e.getLength(),e.insertEmbed(n,b.blotName,t),e.insertText(n+1," "),e.setSelection(n+2)},v=function(e){var t=e.title,n=e.slug,i=e.id,r=e.inputs,c=Object(a.useState)(!1),s=Object(o.a)(c,2),u=s[0],d=s[1],f={title:t,slug:n,id:i},m=function(e){return function(){var t=e&&e.current;t&&p(t,f)}};return l.a.createElement("li",{ref:function(e){e&&e.addEventListener("focusout",(function(t){e.contains(t.relatedTarget)||d(!1)}))}},l.a.createElement("button",{className:b.className,draggable:"true",onDragStart:function(e){var a="{{".concat(n,"|").concat(i,"}}"),l=JSON.stringify({title:t,slug:n,id:i});e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/vnd.placeholder.token",l)},onClick:function(){d(!u)},type:"button"},t),u&&l.a.createElement("ul",null,r.map((function(e){var t=e.label,n=e.quillRef;return l.a.createElement("li",{key:t},l.a.createElement("button",{onClick:m(n),type:"button"},t))}))))},E=n(8),k=n(9),O=n.n(k),y=function(){function e(t){Object(c.a)(this,e),this.quill=t,this.onDrop=this.onDrop.bind(this),this.onClick=this.onClick.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.quill.root.addEventListener("drop",this.onDrop,!1),this.quill.root.addEventListener("click",this.onClick,!1),this.quill.on("selection-change",this.onSelectionChange)}return Object(s.a)(e,[{key:"onDrop",value:function(e){var t=this.quill,n=e.dataTransfer.getData("application/vnd.placeholder.token");if(n&&t){if(e.preventDefault(),document.caretRangeFromPoint){var a=document.getSelection(),l=document.caretRangeFromPoint(e.clientX,e.clientY);a&&l&&a.setBaseAndExtent(l.startContainer,l.startOffset,l.startContainer,l.startOffset)}p(t,JSON.parse(n))}}},{key:"onClick",value:function(e){var t=O.a.find(e.target);t instanceof b&&this.quill.setSelection(t.offset(this.quill.scroll),1,"user")}},{key:"onSelectionChange",value:function(){var e=window.getSelection();this.quill.root.querySelectorAll("".concat(b.tagName,".").concat(b.className)).forEach((function(t){e.containsNode(t,!0)?t.classList.add("selected"):t.classList.remove("selected")}))}}]),e}(),j={formats:["bold","italic",b.blotName],modules:Object(E.a)({toolbar:[["bold","italic"]]},"token-drop",!0),theme:"snow"},S=/\{\{(\w*)\|(\w*)\}\}/gi,q=function(e){var t=e.value,n=e.onChange,i=e.quillRef,r=e.tokensById,c=Object(a.useState)(null),s=Object(o.a)(c,2),u=s[0],d=s[1],f=function(e){return n(function(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll(".".concat(b.className)).forEach((function(e){var t=e.dataset,n=t.id,a=t.slug;e.replaceWith("{{".concat(a,"|").concat(n,"}}"))})),t.body.innerHTML}(e))};return l.a.createElement("div",{ref:function(e){if(!u&&e){e.innerHTML=function(e,t){return e.replace(S,(function(e,n,a){var l=t[a];if(!l)return e;var i=l.title;return"<".concat(b.tagName,' class="').concat(b.className,'" contenteditable="false" data-title="').concat(i,'" data-slug="').concat(n,'" data-id="').concat(a,'">').concat(i,"</").concat(b.tagName,">")}))}(t,r);var n=new g.a(e,j);n.on("text-change",(function(){return f(n.root.innerHTML)})),d(n),i.current=n}},style:{height:200}})};n(24);g.a.register(b),g.a.register("modules/".concat("token-drop"),y);var N=[{title:"first name",slug:"first_name",id:"123"},{title:"last name",slug:"last_name",id:"456"},{title:"email address",slug:"email",id:"789"}],C={};N.forEach((function(e){C[e.id]=e}));var w=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)("<p>The <strong>quick brown fox</strong> jumps over the <em>lazy dog, </em>{{first_name|123}}.</p>"),i=Object(o.a)(n,2),r=i[0],c=i[1],s=Object(a.useState)("<p>{{first_name|123}} {{last_name|456}}, sphinx of <strong>black quartz</strong>, judge my <em>vow</em>.</p><p>{{fake_token|999}}</p>"),u=Object(o.a)(s,2),d=u[0],f=u[1],m=[{label:"Section One",quillRef:e},{label:"Section Two",quillRef:t}];return l.a.createElement("div",{id:"app"},l.a.createElement("aside",null,l.a.createElement("h1",null,"Tokens"),l.a.createElement("ul",{className:"token-list"},N.map((function(e){return l.a.createElement(v,Object.assign({},e,{key:e.id,inputs:m}))})))),l.a.createElement("section",null,l.a.createElement("h1",null,"Editors"),l.a.createElement("p",null,"Note: only ",l.a.createElement("strong",null,"bold"),", ",l.a.createElement("strong",null,"italic"),", and"," ",l.a.createElement("strong",null,"tokens")," are enabled."),l.a.createElement(q,{value:r,onChange:c,quillRef:e,tokensById:C}),l.a.createElement(q,{value:d,onChange:f,quillRef:t,tokensById:C}),l.a.createElement("h1",null,"Outputs"),l.a.createElement("div",{id:"result"},l.a.createElement("p",null,r),l.a.createElement("p",null,d))))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(w,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.ddf4abd5.chunk.js.map