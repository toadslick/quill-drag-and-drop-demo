(this["webpackJsonpquill-demo"]=this["webpackJsonpquill-demo"]||[]).push([[0],{13:function(e,t,n){e.exports=n(25)},18:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(7),r=n.n(i),o=(n(18),n(5)),c=n(3),s=n(4),u=n(1),d=n(11),m=n(10),f=n(12),h=n(2),g=n.n(h),v=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"length",value:function(){return 1}}],[{key:"create",value:function(e){var t=e.title,a=e.slug,l=e.id,i=Object(d.a)(Object(u.a)(n),"create",this).call(this);return i.textContent=t,i.setAttribute("contenteditable","false"),i.dataset.title=t,i.dataset.slug=a,i.dataset.id=l,i}},{key:"value",value:function(e){return e.dataset}}]),n}(g.a.import("blots/embed"));v.blotName="placeholder-token",v.tagName="span",v.className="token";var b=function(e,t){var n=(e.getSelection()||{}).index||e.getLength()||0;e.insertEmbed(n,v.blotName,t),e.insertText(n+1," "),e.setSelection(n+2)},p=v.tagName.toLowerCase(),E=function(e){var t=e.title,n=e.slug,a=e.id,i=e.quillRef,r={title:t,slug:n,id:a};return l.a.createElement(p,{className:v.className,draggable:"true",onDragStart:function(e){var l="{{".concat(n,"|").concat(a,"}}"),i=JSON.stringify({title:t,slug:n,id:a});e.dataTransfer.setData("text/plain",l),e.dataTransfer.setData("application/vnd.placeholder.token",i)},onClick:function(){var e=i.current;e&&b(e,r)},role:"button"},t)},k=n(8),O=n(9),q=n.n(O),S=function(){function e(t){Object(c.a)(this,e),this.quill=t,this.onDrop=this.onDrop.bind(this),this.onClick=this.onClick.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.quill.root.addEventListener("drop",this.onDrop,!1),this.quill.root.addEventListener("click",this.onClick,!1),this.quill.on("selection-change",this.onSelectionChange)}return Object(s.a)(e,[{key:"onDrop",value:function(e){var t=this.quill,n=e.dataTransfer.getData("application/vnd.placeholder.token");if(n&&t){if(e.preventDefault(),document.caretRangeFromPoint){var a=document.getSelection(),l=document.caretRangeFromPoint(e.clientX,e.clientY);a&&l&&a.setBaseAndExtent(l.startContainer,l.startOffset,l.startContainer,l.startOffset)}b(t,JSON.parse(n))}}},{key:"onClick",value:function(e){var t=q.a.find(e.target);t instanceof v&&this.quill.setSelection(t.offset(this.quill.scroll),1,"user")}},{key:"onSelectionChange",value:function(){var e=window.getSelection();this.quill.root.querySelectorAll("".concat(v.tagName,".").concat(v.className)).forEach((function(t){e.containsNode(t,!0)?t.classList.add("selected"):t.classList.remove("selected")}))}}]),e}(),j={formats:["bold","italic",v.blotName],modules:Object(k.a)({toolbar:[["bold","italic"]]},"token-drop",!0),theme:"snow"},y=function(e){var t=e.value,n=e.onChange,i=e.quillRef,r=Object(a.useState)(null),c=Object(o.a)(r,2),s=c[0],u=c[1];return l.a.createElement("div",{ref:function(e){if(!s&&e){e.innerHTML=t;var a=new g.a(e,j);a.on("text-change",(function(){return function(e){var t=(new DOMParser).parseFromString(e,"text/html");t.querySelectorAll(".token").forEach((function(e){var t=e.dataset,n=t.id,a=t.slug;e.replaceWith("{{".concat(a,"|").concat(n,"}}"))})),n(t.body.innerHTML)}(a.root.innerHTML)})),u(a),i.current=a}},style:{height:200}})};n(24);g.a.register(v),g.a.register("modules/".concat("token-drop"),S);var C=function(){var e=Object(a.useRef)(null),t=Object(a.useState)("<p>The <strong>quick brown fox</strong> jumps over the <em>lazy dog</em>.</p>"),n=Object(o.a)(t,2),i=n[0],r=n[1];return l.a.createElement("div",{id:"app"},l.a.createElement("aside",null,l.a.createElement("h1",null,"Tokens"),l.a.createElement("ul",{className:"token-list"},l.a.createElement("li",null,l.a.createElement(E,{title:"first name",slug:"first_name",id:"123",quillRef:e})),l.a.createElement("li",null,l.a.createElement(E,{title:"last name",slug:"last_name",id:"456",quillRef:e})),l.a.createElement("li",null,l.a.createElement(E,{title:"email address",slug:"email",id:"789",quillRef:e})))),l.a.createElement("section",null,l.a.createElement("h1",null,"Editor"),l.a.createElement("p",null,"Note: only ",l.a.createElement("strong",null,"bold"),", ",l.a.createElement("strong",null,"italic"),", and"," ",l.a.createElement("strong",null,"tokens")," are enabled."),l.a.createElement(y,{value:i,onChange:r,quillRef:e}),l.a.createElement("h1",null,"Output"),l.a.createElement("div",{id:"result"},i)))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(C,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.6e1f1431.chunk.js.map